(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var o=n.getElementsByTagName("script");o.length&&(e=o[o.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.d({},{Sw:()=>l,ff:()=>p,_n:()=>r});const e=t.p+"da204f5fcb98644e66bd.jpg",n=()=>{r.innerHTML=' <div class="d-flex justify-content-center align-items-center h-100">\n  <div class="spinner-border" role="status">\n    <span class="visually-hidden">Loading...</span>\n  </div>\n</div>'},o=(t,n)=>{const o=`\n  <div class="text-center container py-5 ">\n          <h4 class="mt-5 mb-5"><strong>${n}</strong></h4>\n        </div>\n        <div class="container">\n  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3  row-cols-lg-4">\n  ${(t=>t.map((t=>`\n      <div class="col my-3 " >\n      <div class="card p-2 h-100 d-flex flex-column justify-content-between">\n      <div class="h-75" >\n      <img class="card-img-top position-relative " src="${t.url_image}" onerror="this.onerror=null;this.src='${e}'" alt="Card image cap">\n      ${t.discount>0?'<span class="badge bg-danger ms-2 position-absolute top-10 start-0">-10%</span>':""}\n      </div>\n    <div class="card-body">\n      <h6 class="card-title text-center">${t.name}</h6>\n      <p class="card-text text-center"> $${t.price}</p>\n      <hr class="my-0" />\n      <div class="d-flex mt-3 mx-0">\n      <button type="button" class="btn btn-secondary flex-fill m-0">Buy now</button>\n      </div>\n\n    </div>\n  </div></div>`)).join(""))(t)}\n</div>\n</div>`;r.innerHTML=o},c=()=>{r.innerHTML='<div class="d-flex align-items-center justify-content-center vh-100">\n  <div class="text-center">\n      <h1 class="display-1 fw-bold">404</h1>\n      <p class="fs-3"> <span class="text-danger">Opps!</span> Page not found.</p>\n      <p class="lead">\n          Something went wrong. Please try again\n        </p>\n      <div class="btn btn-primary" id="btn-err"> Refresh</div>\n  </div>\n</div>',document.querySelector("#btn-err").addEventListener("click",(()=>{window.location.reload()}))},r=document.querySelector("#main"),s=document.querySelector("#search-form"),a=document.querySelector("#search-input"),i=document.querySelector("#home-btn"),l=document.querySelector("#categories-drop"),d=async()=>{n();try{const t=await fetch("http://localhost:5000/api/products");if(!t.ok)throw new Error("cant get products");const e=await t.json();console.log(e),o(e.products,"All products")}catch(t){c(),console.log(t)}},p=async(t,e)=>{n();try{const n=await fetch("http://localhost:5000/api/category/"+t);if(!n.ok)throw new Error("cant fetch category");const c=await n.json();o(c.products,`${e} category`)}catch(t){c(),console.log(t)}};d(),(async()=>{n();try{const t=await fetch("http://localhost:5000/api/category");if(!t.ok)throw new Error("cant get category");(t=>{console.log(t);const e=t.map((t=>`<li class="dropdown-item" role="button" id="${t.id}">${t.name}</li>`)).join("");l.innerHTML=e,[...l.children].forEach((t=>{t.addEventListener("click",(e=>{const{id:n,textContent:o}=t;p(n,o)}))}))})((await t.json()).categories)}catch(t){c(),console.log(t)}})(),s.addEventListener("submit",(t=>{t.preventDefault(),(async t=>{n();try{const e=await fetch("http://localhost:5000/api/products/search?"+new URLSearchParams({productName:t}));if(!e.ok)throw new Error("cant search product");const n=await e.json();o(n.products,`Results for "${t}"`)}catch(t){c(),console.log(t)}})(a.value),a.value=""})),i.addEventListener("click",d)})();